<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/base-layout.html}">
<head>
<title>Danh sách đặt vé</title>

<div layout:fragment="headerFiles">
	<link rel="stylesheet" type="text/css"
		href="/plugins/table/datatable/datatables.css">
	<link rel="stylesheet" type="text/css"
		href="/plugins/table/datatable/extensions/col-reorder/col-reorder.datatables.min.css">
	<link rel="stylesheet" type="text/css"
		href="/plugins/table/datatable/extensions/fixed-columns/fixed-columns.datatables.min.css">
	<link rel="stylesheet" type="text/css"
		href="/css/plugins/light/table/datatable/dt-global_style.css">
	<link rel="stylesheet" type="text/css"
		href="/css/plugins/dark/table/datatable/dt-global_style.css">
	<link rel="stylesheet" type="text/css"
		href="/css/plugins/light/table/datatable/custom_dt_custom.css">
	<link rel="stylesheet" type="text/css"
		href="/css/plugins/dark/table/datatable/custom_dt_custom.css">
</div>

</head>
<body>
	<div layout:fragment="content">

		<!-- BREADCRUMB -->
		<div class="page-meta">
			<nav class="breadcrumb-style-one" aria-label="breadcrumb">
				<ol class="breadcrumb">
					<li class="breadcrumb-item"><a href="#">Đặt vé</a></li>
					<li class="breadcrumb-item active" aria-current="page">Quản lý
						đặt vé</li>
				</ol>
			</nav>
		</div>
		<!-- /BREADCRUMB -->

		<div class="row layout-top-spacing">
			<div class="col-xl-12 col-lg-12 col-sm-12">
				<div class="statbox widget box box-shadow">
					<div class="widget-header">
						<div class="row">
							<div class="col-xl-12 col-md-12 col-sm-12 col-12">
								<h4>Quản lý đặt vé</h4>
							</div>
						</div>
					</div>
					<div class="widget-content widget-content-area">
						<table id="booking-table" class="table style-3 dt-table-hover"
							style="width: 100%">
							<thead>
								<tr>
									<th style="width: 5%">STT</th>
									<th>Mã đặt vé</th>
									<th>Tên người dùng</th>
									<th>Tên chuyến đi</th>
									<th>Giá</th>
									<th>Thời gian đặt vé</th>
									<th>Trạng thái</th>
									<th class="no-content" style="width: 5%">Thao tác</th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="booking, stat : ${bookings}">
									<td th:text="${stat.count}"></td>
									<td th:text="${booking.code}"></td>
									
									<td
										th:text="${booking.user != null ? booking.user.fullName : ''}"></td>
									<td
										th:text="${booking.schedule != null ? booking.schedule.scheduleName : ''}"></td>
										
									<td th:text="${booking.totalPrice}"></td>
									
									<td
										th:text="${#temporals.format(booking.bookingTime, 'HH:mm, dd/MM/yyyy')}"
										class="text-truncate" style="max-width: 250px;"></td>
		
									<td class="text-truncate" style="max-width: 250px;"><span
										th:class="'badge ' + ${booking.status.badgeClass}"
										th:text="${booking.status.displayName}"></span></td>
									<td
										class="table-controls d-flex justify-content-center align-items-center pt-2">
										<li><a th:href="@{/booking/show/{id}(id=${booking.id})}"
											class="bs-tooltip edit" data-bs-toggle="tooltip"
											data-bs-placement="top"> <svg
													xmlns="http://www.w3.org/2000/svg" width="24" height="24"
													viewBox="0 0 24 24" fill="none" stroke="currentColor"
													stroke-width="2" stroke-linecap="round"
													stroke-linejoin="round"
													class="feather feather-eye br-6 mb-1">
												<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
												<circle cx="12" cy="12" r="3"></circle></svg>
										</a></li>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!--  BEGIN CUSTOM SCRIPTS FILE  -->
	<div layout:fragment="footerFiles">
		<script src="/plugins/table/datatable/datatables.js"></script>
		<script
			src="/plugins/table/datatable/extensions/col-reorder/col-reorder.datatables.min.js"></script>
		<script
			src="/plugins/table/datatable/extensions/fixed-columns/fixed-columns.datatables.min.js"></script>
		<script>
			$('#booking-table')
					.DataTable(
							{
								"dom" : "<'dt--top-section'<'row'<'col-12 col-sm-6 d-flex justify-content-sm-start justify-content-center'l><'col-12 col-sm-6 d-flex justify-content-sm-end justify-content-center mt-sm-0 mt-3'f>>>"
										+ "<'table-responsive'tr>"
										+ "<'dt--bottom-section d-sm-flex justify-content-sm-between text-center'<'dt--pages-count  mb-sm-0 mb-3'i><'dt--pagination'p>>",
								"oLanguage" : {
									"oPaginate" : {
										"sPrevious" : '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>',
										"sNext" : '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>'
									},
									"sEmptyTable" : "Chưa có dữ liệu",
									"sInfo" : "Đang hiển thị trang _PAGE_ của  _PAGES_",
									"sSearch" : '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>',
									"sSearchPlaceholder" : "Tìm kiếm...",
									"sZeroRecords" : "Không có bản ghi nào trùng khớp",
									"sLengthMenu" : "Kết quả :  _MENU_",
								},
								"stripeClasses" : [],
								"lengthMenu" : [ 7, 10, 20, 50 ],
								"pageLength" : 10,
								"ordering" : false
							});
		</script>
	</div>
	<!--  END CUSTOM SCRIPTS FILE  -->
</body>

</html>